import{j as t,B as C,T as ee,F as v,P as D,A as K,M as S}from"./bootstrap-loZ_3mSD.js";import{R as k,r as o}from"./vendor-CAgi6j6b.js";import{u as te,c as re}from"./index-BPMj-wsh.js";import"./router-BUXXEe8L.js";var Y={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J=k.createContext&&k.createContext(Y),ne=["attr","size","title"];function se(e,n){if(e==null)return{};var s=ae(e,n),a,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)a=l[i],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ae(e,n){if(e==null)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(n.indexOf(a)>=0)continue;s[a]=e[a]}return s}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},_.apply(this,arguments)}function q(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,a)}return s}function W(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?q(Object(s),!0).forEach(function(a){ie(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function ie(e,n,s){return n=le(n),n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function le(e){var n=oe(e,"string");return typeof n=="symbol"?n:n+""}function oe(e,n){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,n);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Q(e){return e&&e.map((n,s)=>k.createElement(n.tag,W({key:s},n.attr),Q(n.child)))}function M(e){return n=>k.createElement(ce,_({attr:W({},e.attr)},n),Q(e.child))}function ce(e){var n=s=>{var{attr:a,size:i,title:l}=e,x=se(e,ne),b=i||s.size||"1em",c;return s.className&&(c=s.className),e.className&&(c=(c?c+" ":"")+e.className),k.createElement("svg",_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,x,{className:c,style:W(W({color:e.color||s.color},s.style),e.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),l&&k.createElement("title",null,l),e.children)};return J!==void 0?k.createElement(J.Consumer,null,s=>n(s)):n(Y)}function de(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function ue(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function he(e){return M({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(e)}function fe(e){return M({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(e)}function me(e){return M({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(e)}function pe(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(e)}function ge(e,n){return(s,a)=>{const i=s[n],l=a[n];return typeof i=="boolean"||typeof l=="boolean"?i===l?0:(i?1:-1)*(e==="asc"?1:-1):i==null&&l==null?0:i==null?-1:l==null?1:typeof i=="number"&&typeof l=="number"?(i-l)*(e==="asc"?1:-1):String(i).localeCompare(String(l),void 0,{sensitivity:"base"})*(e==="asc"?1:-1)}}function xe({columns:e,data:n,onEdit:s,onDelete:a,onAdd:i,roles:l=[]}){const[x,b]=o.useState("asc"),[c,z]=o.useState("id"),[f,O]=o.useState({}),[N,F]=o.useState({}),[m,j]=o.useState(1),[p,T]=o.useState(10),[y,B]=o.useState(()=>{const r={};return e.forEach(h=>{r[h.field]=180}),r}),P=o.useRef(null),I=o.useRef(0),$=o.useRef(0),G=r=>{c===r?b(x==="asc"?"desc":"asc"):(z(r),b("asc"))},V=(r,h)=>{O({...f,[r]:h})},X=r=>{F({...N,[r]:!N[r]})},R=o.useMemo(()=>{let r=n;return Object.entries(f).forEach(([h,g])=>{g&&(r=r.filter(Z=>String(Z[h]).toLowerCase().includes(g.toLowerCase())))}),r},[n,f]),U=o.useMemo(()=>[...R].sort(ge(x,c)),[R,x,c]),H=o.useMemo(()=>{const r=(m-1)*p;return U.slice(r,r+p)},[U,m,p]),d=Math.ceil(U.length/p),u=(r,h)=>{P.current=h,I.current=r.clientX,$.current=y[h],document.addEventListener("mousemove",E),document.addEventListener("mouseup",A),r.preventDefault()},E=r=>{if(!P.current)return;const h=r.clientX-I.current;B(g=>({...g,[P.current]:Math.max(60,$.current+h)}))},A=()=>{P.current=null,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",A)},w=l.includes("admin")||l.includes("useragent-edit")||l.includes("useragent-delete"),L=l.includes("admin")||l.includes("useragent-delete");return t.jsxs("div",{className:"table-responsive",children:[w&&i&&t.jsx("div",{className:"mb-2",children:t.jsx(C,{variant:"success",size:"sm",onClick:i,children:"Add User Agent"})}),t.jsxs(ee,{bordered:!0,hover:!0,size:"sm",className:"rounded shadow-sm bg-white table-striped",style:{tableLayout:"fixed"},children:[t.jsxs("colgroup",{children:[e.map(r=>t.jsx("col",{style:{width:y[r.field]}},r.field)),t.jsx("col",{style:{width:120}})]}),t.jsx("thead",{className:"table-dark",children:t.jsxs("tr",{children:[e.map(r=>t.jsxs("th",{style:{position:"relative",verticalAlign:"middle",background:c===r.field?"#e9ecef":void 0,userSelect:"none",paddingRight:0},children:[t.jsxs("span",{style:{cursor:r.sortable!==!1?"pointer":"default",userSelect:"none"},onClick:r.sortable!==!1?()=>G(r.field):void 0,children:[r.headerName,c===r.field?x==="asc"?t.jsx(fe,{className:"ms-1 text-primary"}):t.jsx(he,{className:"ms-1 text-primary"}):r.sortable!==!1&&t.jsx(me,{className:"ms-1 text-muted"})]}),t.jsx(C,{variant:"outline-light",size:"sm",className:"p-0 ms-2",style:{verticalAlign:"middle"},onClick:()=>X(r.field),title:`Filter ${r.headerName}`,children:t.jsx(ue,{className:"text-info"})}),t.jsx("span",{style:{position:"absolute",right:0,top:0,height:"100%",width:8,cursor:"col-resize",zIndex:2,userSelect:"none"},onMouseDown:h=>u(h,r.field)}),N[r.field]&&t.jsx(v.Control,{size:"sm",type:"text",placeholder:`Filter ${r.headerName}`,value:f[r.field]||"",onChange:h=>V(r.field,h.target.value),style:{position:"absolute",top:"100%",left:0,width:"100%",zIndex:10},autoFocus:!0})]},r.field)),t.jsx("th",{style:{width:120},children:"Actions"})]})}),t.jsx("tbody",{children:H.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:e.length+1,className:"text-center text-muted",children:"No records found"})}):H.map((r,h)=>t.jsxs("tr",{className:h%2===0?"":"table-active",children:[e.map(g=>t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:g.field==="isPartial"?t.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r[g.field]?t.jsx(de,{color:"#28a745",size:22,title:"Yes"}):t.jsx(pe,{color:"#dc3545",size:22,title:"No"})}):r[g.field]},g.field)),t.jsxs("td",{children:[w&&t.jsx(C,{variant:"outline-primary",size:"sm",className:"me-1",onClick:()=>s(r),children:"Edit"}),L&&t.jsx(C,{variant:"outline-danger",size:"sm",onClick:()=>a(r.id),children:"Delete"})]})]},r.id))})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[t.jsx("div",{children:t.jsx(v.Select,{size:"sm",style:{minWidth:120,display:"inline-block"},value:p,onChange:r=>{T(Number(r.target.value)),j(1)},children:[5,10,15,25,100].map(r=>t.jsxs("option",{value:r,children:[r," / page"]},r))})}),t.jsxs(D,{className:"mb-0",children:[t.jsx(D.First,{onClick:()=>j(1),disabled:m===1}),t.jsx(D.Prev,{onClick:()=>j(r=>Math.max(1,r-1)),disabled:m===1}),[...Array(d).keys()].map(r=>t.jsx(D.Item,{active:r+1===m,onClick:()=>j(r+1),children:r+1},r+1)),t.jsx(D.Next,{onClick:()=>j(r=>Math.min(d,r+1)),disabled:m===d}),t.jsx(D.Last,{onClick:()=>j(d),disabled:m===d})]})]})]})}function je({show:e,onHide:n,onSave:s,initial:a}){const[i,l]=o.useState(a||{key:"",description:"",isPartial:!1}),[x,b]=o.useState("");o.useEffect(()=>{l(a||{key:"",description:"",isPartial:!1}),b("")},[e,a]);const c=f=>{const{name:O,value:N,type:F,checked:m}=f.target;l(j=>({...j,[O]:F==="checkbox"?m:N}))},z=f=>{if(f.preventDefault(),!i.key.trim()){b("User agent cannot be blank");return}s(i)};return t.jsxs(S,{show:e,onHide:n,centered:!0,children:[t.jsx(S.Header,{closeButton:!0,children:t.jsx(S.Title,{children:a&&a.id?"Edit User Agent":"Add User Agent"})}),t.jsxs(v,{onSubmit:z,children:[t.jsxs(S.Body,{children:[x&&t.jsx(K,{variant:"danger",children:x}),t.jsxs(v.Group,{className:"mb-3",children:[t.jsx(v.Label,{children:"User Agent"}),t.jsx(v.Control,{name:"key",value:i.key,onChange:c,required:!0,autoFocus:!0})]}),t.jsxs(v.Group,{className:"mb-3",children:[t.jsx(v.Label,{children:"Description"}),t.jsx(v.Control,{name:"description",value:i.description,onChange:c})]}),t.jsx(v.Group,{className:"mb-3",children:t.jsx(v.Check,{type:"checkbox",label:"Is Partial",name:"isPartial",checked:i.isPartial,onChange:c})})]}),t.jsxs(S.Footer,{children:[t.jsx(C,{variant:"primary",type:"submit",children:"Save"}),t.jsx(C,{variant:"secondary",onClick:n,children:"Cancel"})]})]})]})}function Se(e){const[n,s]=o.useState([]),[a,i]=o.useState(!1),[l,x]=o.useState(null),[b,c]=o.useState(!1),[z,f]=o.useState(""),[O,N]=o.useState(null),[F,m]=o.useState(!1),{authenticatedFetch:j,user:p}=te(),T=Array.isArray(p==null?void 0:p.roles)?p.roles:typeof(p==null?void 0:p.roles)=="string"?[p.roles]:[],{apiBaseUrl:y,loading:B,error:P}=re(),I=()=>{if(B||!y)return;if(P){f("API config error: "+P);return}const d=`${y}/v1/api/UserAgent`;c(!0),f(""),j(d+"?skip=0&top=0&descending=false",{method:"GET",headers:{"Content-Type":"application/json"}}).then(u=>{if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);return u.json()}).then(u=>s(u)).catch(u=>f("Error fetching data: "+u.message)).finally(()=>c(!1))};o.useEffect(()=>{I()},[y,B,P]);const $=d=>{x(d),i(!0)},G=()=>{x(null),i(!0)},V=d=>{N(d),m(!0)},X=()=>{if(m(!1),!O||!y)return;c(!0);const d=`${y}/v1/api/UserAgent`;j(d+`/${O}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(u=>{if(!u.ok)throw new Error(`HTTP error! Status: ${u.status}`);s(E=>E.filter(A=>A.id!==O))}).catch(u=>f("Error deleting: "+u.message)).finally(()=>{c(!1),N(null)})},R=d=>{if(!y)return;c(!0),f("");let u,E;const A=`${y}/v1/api/UserAgent`;d.id?(u="PUT",E=`${A}/${d.id}`):(u="POST",E=A),j(E,{method:u,headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(w=>{if(!w.ok)throw new Error(`HTTP error! Status: ${w.status}`);return w.text()}).then(w=>{const L=JSON.parse(w);s(r=>r.some(g=>g.id===L.id)?r.map(g=>g.id===L.id?L:g):[L,...r]),i(!1)}).catch(w=>f("Error saving: "+w.message)).finally(()=>c(!1))},U=[{field:"id",headerName:"ID",sortable:!0},{field:"key",headerName:"User Agent",sortable:!0},{field:"description",headerName:"Description",sortable:!0},{field:"isPartial",headerName:"Is Partial",sortable:!0}];function H(){const d=T.map(u=>typeof u=="string"?u.toLowerCase():"");return d.includes("admin")||d.includes("useragent-edit")||d.includes("useragent-delete")?t.jsx(C,{variant:"success",size:"sm",onClick:G,children:"Add User Agent"}):null}return t.jsxs("div",{className:"container-fluid p-0 mt-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[t.jsx("h4",{className:"mb-0",children:"User Agents"}),H()]}),z&&t.jsx(K,{variant:"danger",children:z}),t.jsx(xe,{columns:U,data:n,onEdit:$,onDelete:V,roles:T}),t.jsx(je,{show:a,onHide:()=>i(!1),onSave:R,initial:l}),t.jsxs(S,{show:F,onHide:()=>m(!1),centered:!0,children:[t.jsx(S.Header,{closeButton:!0,children:t.jsx(S.Title,{children:"Confirm Delete"})}),t.jsx(S.Body,{children:"Are you sure you want to delete this user agent?"}),t.jsxs(S.Footer,{children:[t.jsx(C,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),t.jsx(C,{variant:"danger",onClick:X,children:"Delete"})]})]}),b&&t.jsx("div",{className:"text-center mt-2",children:t.jsx("span",{className:"spinner-border spinner-border-sm text-primary"})})]})}export{Se as default};
