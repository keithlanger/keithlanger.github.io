import{j as t,B as S,T as ee,F as j,P as D,A as K,M as y}from"./bootstrap-loZ_3mSD.js";import{R as E,r as c}from"./vendor-CAgi6j6b.js";import{u as te}from"./index-CV02oq1s.js";import"./router-CJeIsT-5.js";var Y={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J=E.createContext&&E.createContext(Y),re=["attr","size","title"];function ne(e,n){if(e==null)return{};var s=se(e,n),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function se(e,n){if(e==null)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(n.indexOf(a)>=0)continue;s[a]=e[a]}return s}function $(){return $=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$.apply(this,arguments)}function q(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,a)}return s}function H(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?q(Object(s),!0).forEach(function(a){ae(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function ae(e,n,s){return n=ie(n),n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function ie(e){var n=le(e,"string");return typeof n=="symbol"?n:n+""}function le(e,n){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,n);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Q(e){return e&&e.map((n,s)=>E.createElement(n.tag,H({key:s},n.attr),Q(n.child)))}function M(e){return n=>E.createElement(oe,$({attr:H({},e.attr)},n),Q(e.child))}function oe(e){var n=s=>{var{attr:a,size:i,title:o}=e,x=ne(e,re),b=i||s.size||"1em",d;return s.className&&(d=s.className),e.className&&(d=(d?d+" ":"")+e.className),E.createElement("svg",$({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,x,{className:d,style:H(H({color:e.color||s.color},s.style),e.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),o&&E.createElement("title",null,o),e.children)};return J!==void 0?E.createElement(J.Consumer,null,s=>n(s)):n(Y)}function ce(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function de(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function ue(e){return M({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(e)}function he(e){return M({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(e)}function me(e){return M({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(e)}function fe(e){return M({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(e)}function pe(e,n){return(s,a)=>{const i=s[n],o=a[n];return typeof i=="boolean"||typeof o=="boolean"?i===o?0:(i?1:-1)*(e==="asc"?1:-1):i==null&&o==null?0:i==null?-1:o==null?1:typeof i=="number"&&typeof o=="number"?(i-o)*(e==="asc"?1:-1):String(i).localeCompare(String(o),void 0,{sensitivity:"base"})*(e==="asc"?1:-1)}}function xe({columns:e,data:n,onEdit:s,onDelete:a,onAdd:i,roles:o=[]}){const[x,b]=c.useState("asc"),[d,k]=c.useState("id"),[h,N]=c.useState({}),[C,F]=c.useState({}),[m,g]=c.useState(1),[f,U]=c.useState(10),[_,z]=c.useState(()=>{const r={};return e.forEach(u=>{r[u.field]=180}),r}),A=c.useRef(null),B=c.useRef(0),I=c.useRef(0),W=r=>{d===r?b(x==="asc"?"desc":"asc"):(k(r),b("asc"))},G=(r,u)=>{N({...h,[r]:u})},V=r=>{F({...C,[r]:!C[r]})},R=c.useMemo(()=>{let r=n;return Object.entries(h).forEach(([u,w])=>{w&&(r=r.filter(Z=>String(Z[u]).toLowerCase().includes(w.toLowerCase())))}),r},[n,h]),T=c.useMemo(()=>[...R].sort(pe(x,d)),[R,x,d]),l=c.useMemo(()=>{const r=(m-1)*f;return T.slice(r,r+f)},[T,m,f]),p=Math.ceil(T.length/f),P=(r,u)=>{A.current=u,B.current=r.clientX,I.current=_[u],document.addEventListener("mousemove",v),document.addEventListener("mouseup",O),r.preventDefault()},v=r=>{if(!A.current)return;const u=r.clientX-B.current;z(w=>({...w,[A.current]:Math.max(60,I.current+u)}))},O=()=>{A.current=null,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",O)},L=o.includes("admin")||o.includes("useragent-edit")||o.includes("useragent-delete"),X=o.includes("admin")||o.includes("useragent-delete");return t.jsxs("div",{className:"table-responsive",children:[L&&i&&t.jsx("div",{className:"mb-2",children:t.jsx(S,{variant:"success",size:"sm",onClick:i,children:"Add User Agent"})}),t.jsxs(ee,{bordered:!0,hover:!0,size:"sm",className:"rounded shadow-sm bg-white table-striped",style:{tableLayout:"fixed"},children:[t.jsxs("colgroup",{children:[e.map(r=>t.jsx("col",{style:{width:_[r.field]}},r.field)),t.jsx("col",{style:{width:120}})]}),t.jsx("thead",{className:"table-dark",children:t.jsxs("tr",{children:[e.map(r=>t.jsxs("th",{style:{position:"relative",verticalAlign:"middle",background:d===r.field?"#e9ecef":void 0,userSelect:"none",paddingRight:0},children:[t.jsxs("span",{style:{cursor:r.sortable!==!1?"pointer":"default",userSelect:"none"},onClick:r.sortable!==!1?()=>W(r.field):void 0,children:[r.headerName,d===r.field?x==="asc"?t.jsx(he,{className:"ms-1 text-primary"}):t.jsx(ue,{className:"ms-1 text-primary"}):r.sortable!==!1&&t.jsx(me,{className:"ms-1 text-muted"})]}),t.jsx(S,{variant:"outline-light",size:"sm",className:"p-0 ms-2",style:{verticalAlign:"middle"},onClick:()=>V(r.field),title:`Filter ${r.headerName}`,children:t.jsx(de,{className:"text-info"})}),t.jsx("span",{style:{position:"absolute",right:0,top:0,height:"100%",width:8,cursor:"col-resize",zIndex:2,userSelect:"none"},onMouseDown:u=>P(u,r.field)}),C[r.field]&&t.jsx(j.Control,{size:"sm",type:"text",placeholder:`Filter ${r.headerName}`,value:h[r.field]||"",onChange:u=>G(r.field,u.target.value),style:{position:"absolute",top:"100%",left:0,width:"100%",zIndex:10},autoFocus:!0})]},r.field)),t.jsx("th",{style:{width:120},children:"Actions"})]})}),t.jsx("tbody",{children:l.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:e.length+1,className:"text-center text-muted",children:"No records found"})}):l.map((r,u)=>t.jsxs("tr",{className:u%2===0?"":"table-active",children:[e.map(w=>t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:w.field==="isPartial"?t.jsx("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r[w.field]?t.jsx(ce,{color:"#28a745",size:22,title:"Yes"}):t.jsx(fe,{color:"#dc3545",size:22,title:"No"})}):r[w.field]},w.field)),t.jsxs("td",{children:[L&&t.jsx(S,{variant:"outline-primary",size:"sm",className:"me-1",onClick:()=>s(r),children:"Edit"}),X&&t.jsx(S,{variant:"outline-danger",size:"sm",onClick:()=>a(r.id),children:"Delete"})]})]},r.id))})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[t.jsx("div",{children:t.jsx(j.Select,{size:"sm",style:{minWidth:120,display:"inline-block"},value:f,onChange:r=>{U(Number(r.target.value)),g(1)},children:[5,10,15,25,100].map(r=>t.jsxs("option",{value:r,children:[r," / page"]},r))})}),t.jsxs(D,{className:"mb-0",children:[t.jsx(D.First,{onClick:()=>g(1),disabled:m===1}),t.jsx(D.Prev,{onClick:()=>g(r=>Math.max(1,r-1)),disabled:m===1}),[...Array(p).keys()].map(r=>t.jsx(D.Item,{active:r+1===m,onClick:()=>g(r+1),children:r+1},r+1)),t.jsx(D.Next,{onClick:()=>g(r=>Math.min(p,r+1)),disabled:m===p}),t.jsx(D.Last,{onClick:()=>g(p),disabled:m===p})]})]})]})}function ge({show:e,onHide:n,onSave:s,initial:a}){const[i,o]=c.useState(a||{key:"",description:"",isPartial:!1}),[x,b]=c.useState("");c.useEffect(()=>{o(a||{key:"",description:"",isPartial:!1}),b("")},[e,a]);const d=h=>{const{name:N,value:C,type:F,checked:m}=h.target;o(g=>({...g,[N]:F==="checkbox"?m:C}))},k=h=>{if(h.preventDefault(),!i.key.trim()){b("User agent cannot be blank");return}s(i)};return t.jsxs(y,{show:e,onHide:n,centered:!0,children:[t.jsx(y.Header,{closeButton:!0,children:t.jsx(y.Title,{children:a&&a.id?"Edit User Agent":"Add User Agent"})}),t.jsxs(j,{onSubmit:k,children:[t.jsxs(y.Body,{children:[x&&t.jsx(K,{variant:"danger",children:x}),t.jsxs(j.Group,{className:"mb-3",children:[t.jsx(j.Label,{children:"User Agent"}),t.jsx(j.Control,{name:"key",value:i.key,onChange:d,required:!0,autoFocus:!0})]}),t.jsxs(j.Group,{className:"mb-3",children:[t.jsx(j.Label,{children:"Description"}),t.jsx(j.Control,{name:"description",value:i.description,onChange:d})]}),t.jsx(j.Group,{className:"mb-3",children:t.jsx(j.Check,{type:"checkbox",label:"Is Partial",name:"isPartial",checked:i.isPartial,onChange:d})})]}),t.jsxs(y.Footer,{children:[t.jsx(S,{variant:"primary",type:"submit",children:"Save"}),t.jsx(S,{variant:"secondary",onClick:n,children:"Cancel"})]})]})]})}function we(e){const[n,s]=c.useState([]),[a,i]=c.useState(!1),[o,x]=c.useState(null),[b,d]=c.useState(!1),[k,h]=c.useState(""),[N,C]=c.useState(null),[F,m]=c.useState(!1),{authenticatedFetch:g,user:f}=te(),U=Array.isArray(f==null?void 0:f.roles)?f.roles:typeof(f==null?void 0:f.roles)=="string"?[f.roles]:[],z="https://dailyapisimple-linux2-cbcscfeafkekg6ca.centralus-01.azurewebsites.net/v1/api/UserAgent",A=()=>{d(!0),h(""),g(z+"?skip=0&top=0&descending=false",{method:"GET",headers:{"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);return l.json()}).then(l=>s(l)).catch(l=>h("Error fetching data: "+l.message)).finally(()=>d(!1))};c.useEffect(()=>{A()},[]);const B=l=>{x(l),i(!0)},I=()=>{x(null),i(!0)},W=l=>{C(l),m(!0)},G=()=>{m(!1),N&&(d(!0),g(z+`/${N}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);s(p=>p.filter(P=>P.id!==N))}).catch(l=>h("Error deleting: "+l.message)).finally(()=>{d(!1),C(null)}))},V=l=>{d(!0),h("");let p,P;l.id?(p="PUT",P=`${z}/${l.id}`):(p="POST",P=z),g(P,{method:p,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(v=>{if(!v.ok)throw new Error(`HTTP error! Status: ${v.status}`);return v.text()}).then(v=>{const O=JSON.parse(v);s(L=>L.some(r=>r.id===O.id)?L.map(r=>r.id===O.id?O:r):[O,...L]),i(!1)}).catch(v=>h("Error saving: "+v.message)).finally(()=>d(!1))},R=[{field:"id",headerName:"ID",sortable:!0},{field:"key",headerName:"User Agent",sortable:!0},{field:"description",headerName:"Description",sortable:!0},{field:"isPartial",headerName:"Is Partial",sortable:!0}];function T(){const l=U.map(p=>typeof p=="string"?p.toLowerCase():"");return l.includes("admin")||l.includes("useragent-edit")||l.includes("useragent-delete")?t.jsx(S,{variant:"success",size:"sm",onClick:I,children:"Add User Agent"}):null}return t.jsxs("div",{className:"container-fluid p-0 mt-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[t.jsx("h4",{className:"mb-0",children:"User Agents"}),T()]}),k&&t.jsx(K,{variant:"danger",children:k}),t.jsx(xe,{columns:R,data:n,onEdit:B,onDelete:W,roles:U}),t.jsx(ge,{show:a,onHide:()=>i(!1),onSave:V,initial:o}),t.jsxs(y,{show:F,onHide:()=>m(!1),centered:!0,children:[t.jsx(y.Header,{closeButton:!0,children:t.jsx(y.Title,{children:"Confirm Delete"})}),t.jsx(y.Body,{children:"Are you sure you want to delete this user agent?"}),t.jsxs(y.Footer,{children:[t.jsx(S,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),t.jsx(S,{variant:"danger",onClick:G,children:"Delete"})]})]}),b&&t.jsx("div",{className:"text-center mt-2",children:t.jsx("span",{className:"spinner-border spinner-border-sm text-primary"})})]})}export{we as default};
//# sourceMappingURL=UserAgents-DxDqAWgm.js.map
