import{j as t,B as w,T as ee,F as j,P as L,A as K,M as y}from"./bootstrap-loZ_3mSD.js";import{R as E,r as c}from"./vendor-CAgi6j6b.js";import{u as te}from"./index-B3ptj8zj.js";import"./router-CJeIsT-5.js";var Q={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J=E.createContext&&E.createContext(Q),re=["attr","size","title"];function ne(e,n){if(e==null)return{};var s=se(e,n),a,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)a=o[i],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function se(e,n){if(e==null)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(n.indexOf(a)>=0)continue;s[a]=e[a]}return s}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},R.apply(this,arguments)}function q(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,a)}return s}function $(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?q(Object(s),!0).forEach(function(a){ae(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function ae(e,n,s){return n=ie(n),n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function ie(e){var n=le(e,"string");return typeof n=="symbol"?n:n+""}function le(e,n){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,n);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Y(e){return e&&e.map((n,s)=>E.createElement(n.tag,$({key:s},n.attr),Y(n.child)))}function H(e){return n=>E.createElement(oe,R({attr:$({},e.attr)},n),Y(e.child))}function oe(e){var n=s=>{var{attr:a,size:i,title:o}=e,x=ne(e,re),b=i||s.size||"1em",d;return s.className&&(d=s.className),e.className&&(d=(d?d+" ":"")+e.className),E.createElement("svg",R({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,x,{className:d,style:$($({color:e.color||s.color},s.style),e.style),height:b,width:b,xmlns:"http://www.w3.org/2000/svg"}),o&&E.createElement("title",null,o),e.children)};return J!==void 0?E.createElement(J.Consumer,null,s=>n(s)):n(Q)}function ce(e){return H({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function de(e){return H({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(e)}function ue(e){return H({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(e)}function he(e){return H({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(e)}function me(e,n){return(s,a)=>{const i=s[n],o=a[n];return typeof i=="boolean"||typeof o=="boolean"?i===o?0:(i?1:-1)*(e==="asc"?1:-1):i==null&&o==null?0:i==null?-1:o==null?1:typeof i=="number"&&typeof o=="number"?(i-o)*(e==="asc"?1:-1):String(i).localeCompare(String(o),void 0,{sensitivity:"base"})*(e==="asc"?1:-1)}}function fe({columns:e,data:n,onEdit:s,onDelete:a,onAdd:i,roles:o=[]}){const[x,b]=c.useState("asc"),[d,k]=c.useState("id"),[h,C]=c.useState({}),[S,F]=c.useState({}),[m,g]=c.useState(1),[f,T]=c.useState(10),[_,A]=c.useState(()=>{const r={};return e.forEach(u=>{r[u.field]=180}),r}),D=c.useRef(null),U=c.useRef(0),I=c.useRef(0),W=r=>{d===r?b(x==="asc"?"desc":"asc"):(k(r),b("asc"))},G=(r,u)=>{C({...h,[r]:u})},V=r=>{F({...S,[r]:!S[r]})},B=c.useMemo(()=>{let r=n;return Object.entries(h).forEach(([u,O])=>{O&&(r=r.filter(Z=>String(Z[u]).toLowerCase().includes(O.toLowerCase())))}),r},[n,h]),M=c.useMemo(()=>[...B].sort(me(x,d)),[B,x,d]),l=c.useMemo(()=>{const r=(m-1)*f;return M.slice(r,r+f)},[M,m,f]),p=Math.ceil(M.length/f),N=(r,u)=>{D.current=u,U.current=r.clientX,I.current=_[u],document.addEventListener("mousemove",v),document.addEventListener("mouseup",P),r.preventDefault()},v=r=>{if(!D.current)return;const u=r.clientX-U.current;A(O=>({...O,[D.current]:Math.max(60,I.current+u)}))},P=()=>{D.current=null,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",P)},z=o.includes("admin")||o.includes("useragent-edit")||o.includes("useragent-delete"),X=o.includes("admin")||o.includes("useragent-delete");return t.jsxs("div",{className:"table-responsive",children:[z&&i&&t.jsx("div",{className:"mb-2",children:t.jsx(w,{variant:"success",size:"sm",onClick:i,children:"Add User Agent"})}),t.jsxs(ee,{bordered:!0,hover:!0,size:"sm",className:"rounded shadow-sm bg-white table-striped",style:{tableLayout:"fixed"},children:[t.jsxs("colgroup",{children:[e.map(r=>t.jsx("col",{style:{width:_[r.field]}},r.field)),t.jsx("col",{style:{width:120}})]}),t.jsx("thead",{className:"table-dark",children:t.jsxs("tr",{children:[e.map(r=>t.jsxs("th",{style:{position:"relative",verticalAlign:"middle",background:d===r.field?"#e9ecef":void 0,userSelect:"none",paddingRight:0},children:[t.jsxs("span",{style:{cursor:r.sortable!==!1?"pointer":"default",userSelect:"none"},onClick:r.sortable!==!1?()=>W(r.field):void 0,children:[r.headerName,d===r.field?x==="asc"?t.jsx(ue,{className:"ms-1 text-primary"}):t.jsx(de,{className:"ms-1 text-primary"}):r.sortable!==!1&&t.jsx(he,{className:"ms-1 text-muted"})]}),t.jsx(w,{variant:"outline-light",size:"sm",className:"p-0 ms-2",style:{verticalAlign:"middle"},onClick:()=>V(r.field),title:`Filter ${r.headerName}`,children:t.jsx(ce,{className:"text-info"})}),t.jsx("span",{style:{position:"absolute",right:0,top:0,height:"100%",width:8,cursor:"col-resize",zIndex:2,userSelect:"none"},onMouseDown:u=>N(u,r.field)}),S[r.field]&&t.jsx(j.Control,{size:"sm",type:"text",placeholder:`Filter ${r.headerName}`,value:h[r.field]||"",onChange:u=>G(r.field,u.target.value),style:{position:"absolute",top:"100%",left:0,width:"100%",zIndex:10},autoFocus:!0})]},r.field)),t.jsx("th",{style:{width:120},children:"Actions"})]})}),t.jsx("tbody",{children:l.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:e.length+1,className:"text-center text-muted",children:"No records found"})}):l.map((r,u)=>t.jsxs("tr",{className:u%2===0?"":"table-active",children:[e.map(O=>t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r[O.field]},O.field)),t.jsxs("td",{children:[z&&t.jsx(w,{variant:"outline-primary",size:"sm",className:"me-1",onClick:()=>s(r),children:"Edit"}),X&&t.jsx(w,{variant:"outline-danger",size:"sm",onClick:()=>a(r.id),children:"Delete"})]})]},r.id))})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[t.jsx("div",{children:t.jsx(j.Select,{size:"sm",style:{minWidth:120,display:"inline-block"},value:f,onChange:r=>{T(Number(r.target.value)),g(1)},children:[5,10,15,25,100].map(r=>t.jsxs("option",{value:r,children:[r," / page"]},r))})}),t.jsxs(L,{className:"mb-0",children:[t.jsx(L.First,{onClick:()=>g(1),disabled:m===1}),t.jsx(L.Prev,{onClick:()=>g(r=>Math.max(1,r-1)),disabled:m===1}),[...Array(p).keys()].map(r=>t.jsx(L.Item,{active:r+1===m,onClick:()=>g(r+1),children:r+1},r+1)),t.jsx(L.Next,{onClick:()=>g(r=>Math.min(p,r+1)),disabled:m===p}),t.jsx(L.Last,{onClick:()=>g(p),disabled:m===p})]})]})]})}function pe({show:e,onHide:n,onSave:s,initial:a}){const[i,o]=c.useState(a||{key:"",description:"",isPartial:!1}),[x,b]=c.useState("");c.useEffect(()=>{o(a||{key:"",description:"",isPartial:!1}),b("")},[e,a]);const d=h=>{const{name:C,value:S,type:F,checked:m}=h.target;o(g=>({...g,[C]:F==="checkbox"?m:S}))},k=h=>{if(h.preventDefault(),!i.key.trim()){b("User agent cannot be blank");return}s(i)};return t.jsxs(y,{show:e,onHide:n,centered:!0,children:[t.jsx(y.Header,{closeButton:!0,children:t.jsx(y.Title,{children:a&&a.id?"Edit User Agent":"Add User Agent"})}),t.jsxs(j,{onSubmit:k,children:[t.jsxs(y.Body,{children:[x&&t.jsx(K,{variant:"danger",children:x}),t.jsxs(j.Group,{className:"mb-3",children:[t.jsx(j.Label,{children:"User Agent"}),t.jsx(j.Control,{name:"key",value:i.key,onChange:d,required:!0,autoFocus:!0})]}),t.jsxs(j.Group,{className:"mb-3",children:[t.jsx(j.Label,{children:"Description"}),t.jsx(j.Control,{name:"description",value:i.description,onChange:d})]}),t.jsx(j.Group,{className:"mb-3",children:t.jsx(j.Check,{type:"checkbox",label:"Is Partial",name:"isPartial",checked:i.isPartial,onChange:d})})]}),t.jsxs(y.Footer,{children:[t.jsx(w,{variant:"primary",type:"submit",children:"Save"}),t.jsx(w,{variant:"secondary",onClick:n,children:"Cancel"})]})]})]})}function ve(e){const[n,s]=c.useState([]),[a,i]=c.useState(!1),[o,x]=c.useState(null),[b,d]=c.useState(!1),[k,h]=c.useState(""),[C,S]=c.useState(null),[F,m]=c.useState(!1),{authenticatedFetch:g,user:f}=te(),T=Array.isArray(f==null?void 0:f.roles)?f.roles:typeof(f==null?void 0:f.roles)=="string"?[f.roles]:[],A="https://dailyapisimple-gjchg7exhrcxf5cc.centralus-01.azurewebsites.net/v1/api/UserAgent",D=()=>{d(!0),h(""),g(A+"?skip=0&top=0&descending=false",{method:"GET",headers:{"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);return l.json()}).then(l=>s(l)).catch(l=>h("Error fetching data: "+l.message)).finally(()=>d(!1))};c.useEffect(()=>{D()},[]);const U=l=>{x(l),i(!0)},I=()=>{x(null),i(!0)},W=l=>{S(l),m(!0)},G=()=>{m(!1),C&&(d(!0),g(A+`/${C}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);s(p=>p.filter(N=>N.id!==C))}).catch(l=>h("Error deleting: "+l.message)).finally(()=>{d(!1),S(null)}))},V=l=>{d(!0),h("");let p,N;l.id?(p="PUT",N=`${A}/${l.id}`):(p="POST",N=A),g(N,{method:p,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(v=>{if(!v.ok)throw new Error(`HTTP error! Status: ${v.status}`);return v.text()}).then(v=>{const P=JSON.parse(v);s(z=>z.some(r=>r.id===P.id)?z.map(r=>r.id===P.id?P:r):[P,...z]),i(!1)}).catch(v=>h("Error saving: "+v.message)).finally(()=>d(!1))},B=[{field:"id",headerName:"ID",sortable:!0},{field:"key",headerName:"User Agent",sortable:!0},{field:"description",headerName:"Description",sortable:!0},{field:"isPartial",headerName:"Is Partial",sortable:!0}];function M(){const l=T.map(p=>typeof p=="string"?p.toLowerCase():"");return l.includes("admin")||l.includes("useragent-edit")||l.includes("useragent-delete")?t.jsx(w,{variant:"success",size:"sm",onClick:I,children:"Add User Agent"}):null}return t.jsxs("div",{className:"container-fluid p-0 mt-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[t.jsx("h4",{className:"mb-0",children:"User Agents"}),M()]}),k&&t.jsx(K,{variant:"danger",children:k}),t.jsx(fe,{columns:B,data:n,onEdit:U,onDelete:W,roles:T}),t.jsx(pe,{show:a,onHide:()=>i(!1),onSave:V,initial:o}),t.jsxs(y,{show:F,onHide:()=>m(!1),centered:!0,children:[t.jsx(y.Header,{closeButton:!0,children:t.jsx(y.Title,{children:"Confirm Delete"})}),t.jsx(y.Body,{children:"Are you sure you want to delete this user agent?"}),t.jsxs(y.Footer,{children:[t.jsx(w,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),t.jsx(w,{variant:"danger",onClick:G,children:"Delete"})]})]}),b&&t.jsx("div",{className:"text-center mt-2",children:t.jsx("span",{className:"spinner-border spinner-border-sm text-primary"})})]})}export{ve as default};
//# sourceMappingURL=UserAgents-CgbG93vJ.js.map
