import{j as t,T as K,B as S,F as g,P as F,A as V,M as b}from"./bootstrap-9hNhFV_4.js";import{R as E,r as o}from"./vendor-D-ycbrtU.js";import{u as Q}from"./index-Cuqpth8U.js";import"./router-Cwzx9i8E.js";var X={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},W=E.createContext&&E.createContext(X),Y=["attr","size","title"];function Z(e,n){if(e==null)return{};var s=ee(e,n),a,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)a=c[i],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}function ee(e,n){if(e==null)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(n.indexOf(a)>=0)continue;s[a]=e[a]}return s}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},U.apply(this,arguments)}function G(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),s.push.apply(s,a)}return s}function I(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?G(Object(s),!0).forEach(function(a){te(e,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))})}return e}function te(e,n,s){return n=re(n),n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function re(e){var n=ne(e,"string");return typeof n=="symbol"?n:n+""}function ne(e,n){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var a=s.call(e,n);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function J(e){return e&&e.map((n,s)=>E.createElement(n.tag,I({key:s},n.attr),J(n.child)))}function B(e){return n=>E.createElement(se,U({attr:I({},e.attr)},n),J(e.child))}function se(e){var n=s=>{var{attr:a,size:i,title:c}=e,h=Z(e,Y),v=i||s.size||"1em",d;return s.className&&(d=s.className),e.className&&(d=(d?d+" ":"")+e.className),E.createElement("svg",U({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,a,h,{className:d,style:I(I({color:e.color||s.color},s.style),e.style),height:v,width:v,xmlns:"http://www.w3.org/2000/svg"}),c&&E.createElement("title",null,c),e.children)};return W!==void 0?E.createElement(W.Consumer,null,s=>n(s)):n(X)}function ae(e){return B({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function ie(e){return B({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(e)}function le(e){return B({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(e)}function oe(e){return B({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(e)}function ce(e,n){return(s,a)=>{const i=s[n],c=a[n];return typeof i=="boolean"||typeof c=="boolean"?i===c?0:(i?1:-1)*(e==="asc"?1:-1):i==null&&c==null?0:i==null?-1:c==null?1:typeof i=="number"&&typeof c=="number"?(i-c)*(e==="asc"?1:-1):String(i).localeCompare(String(c),void 0,{sensitivity:"base"})*(e==="asc"?1:-1)}}function de({columns:e,data:n,onEdit:s,onDelete:a}){const[i,c]=o.useState("asc"),[h,v]=o.useState("id"),[d,k]=o.useState({}),[m,C]=o.useState({}),[f,j]=o.useState(1),[p,N]=o.useState(10),[R,A]=o.useState(()=>{const r={};return e.forEach(u=>{r[u.field]=180}),r}),D=o.useRef(null),L=o.useRef(0),M=o.useRef(0),$=r=>{h===r?c(i==="asc"?"desc":"asc"):(v(r),c("asc"))},H=(r,u)=>{k({...d,[r]:u})},_=r=>{C({...m,[r]:!m[r]})},T=o.useMemo(()=>{let r=n;return Object.entries(d).forEach(([u,O])=>{O&&(r=r.filter(q=>String(q[u]).toLowerCase().includes(O.toLowerCase())))}),r},[n,d]),l=o.useMemo(()=>[...T].sort(ce(i,h)),[T,i,h]),w=o.useMemo(()=>{const r=(f-1)*p;return l.slice(r,r+p)},[l,f,p]),x=Math.ceil(l.length/p),y=(r,u)=>{D.current=u,L.current=r.clientX,M.current=R[u],document.addEventListener("mousemove",P),document.addEventListener("mouseup",z),r.preventDefault()},P=r=>{if(!D.current)return;const u=r.clientX-L.current;A(O=>({...O,[D.current]:Math.max(60,M.current+u)}))},z=()=>{D.current=null,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",z)};return t.jsxs("div",{className:"table-responsive",children:[t.jsxs(K,{bordered:!0,hover:!0,size:"sm",className:"rounded shadow-sm bg-white table-striped",style:{tableLayout:"fixed"},children:[t.jsxs("colgroup",{children:[e.map(r=>t.jsx("col",{style:{width:R[r.field]}},r.field)),t.jsx("col",{style:{width:120}})]}),t.jsx("thead",{className:"table-dark",children:t.jsxs("tr",{children:[e.map(r=>t.jsxs("th",{style:{position:"relative",verticalAlign:"middle",background:h===r.field?"#e9ecef":void 0,userSelect:"none",paddingRight:0},children:[t.jsxs("span",{style:{cursor:r.sortable!==!1?"pointer":"default",userSelect:"none"},onClick:r.sortable!==!1?()=>$(r.field):void 0,children:[r.headerName,h===r.field?i==="asc"?t.jsx(le,{className:"ms-1 text-primary"}):t.jsx(ie,{className:"ms-1 text-primary"}):r.sortable!==!1&&t.jsx(oe,{className:"ms-1 text-muted"})]}),t.jsx(S,{variant:"outline-light",size:"sm",className:"p-0 ms-2",style:{verticalAlign:"middle"},onClick:()=>_(r.field),title:`Filter ${r.headerName}`,children:t.jsx(ae,{className:"text-info"})}),t.jsx("span",{style:{position:"absolute",right:0,top:0,height:"100%",width:8,cursor:"col-resize",zIndex:2,userSelect:"none"},onMouseDown:u=>y(u,r.field)}),m[r.field]&&t.jsx(g.Control,{size:"sm",type:"text",placeholder:`Filter ${r.headerName}`,value:d[r.field]||"",onChange:u=>H(r.field,u.target.value),style:{position:"absolute",top:"100%",left:0,width:"100%",zIndex:10},autoFocus:!0})]},r.field)),t.jsx("th",{style:{width:120},children:"Actions"})]})}),t.jsx("tbody",{children:w.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:e.length+1,className:"text-center text-muted",children:"No records found"})}):w.map((r,u)=>t.jsxs("tr",{className:u%2===0?"":"table-active",children:[e.map(O=>t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r[O.field]},O.field)),t.jsxs("td",{children:[t.jsx(S,{variant:"outline-primary",size:"sm",className:"me-1",onClick:()=>s(r),children:"Edit"}),t.jsx(S,{variant:"outline-danger",size:"sm",onClick:()=>a(r.id),children:"Delete"})]})]},r.id))})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-2",children:[t.jsx("div",{children:t.jsx(g.Select,{size:"sm",style:{minWidth:120,display:"inline-block"},value:p,onChange:r=>{N(Number(r.target.value)),j(1)},children:[5,10,15,25,100].map(r=>t.jsxs("option",{value:r,children:[r," / page"]},r))})}),t.jsxs(F,{className:"mb-0",children:[t.jsx(F.First,{onClick:()=>j(1),disabled:f===1}),t.jsx(F.Prev,{onClick:()=>j(r=>Math.max(1,r-1)),disabled:f===1}),[...Array(x).keys()].map(r=>t.jsx(F.Item,{active:r+1===f,onClick:()=>j(r+1),children:r+1},r+1)),t.jsx(F.Next,{onClick:()=>j(r=>Math.min(x,r+1)),disabled:f===x}),t.jsx(F.Last,{onClick:()=>j(x),disabled:f===x})]})]})]})}function ue({show:e,onHide:n,onSave:s,initial:a}){const[i,c]=o.useState(a||{key:"",description:"",isPartial:!1}),[h,v]=o.useState("");o.useEffect(()=>{c(a||{key:"",description:"",isPartial:!1}),v("")},[e,a]);const d=m=>{const{name:C,value:f,type:j,checked:p}=m.target;c(N=>({...N,[C]:j==="checkbox"?p:f}))},k=m=>{if(m.preventDefault(),!i.key.trim()){v("User agent cannot be blank");return}s(i)};return t.jsxs(b,{show:e,onHide:n,centered:!0,children:[t.jsx(b.Header,{closeButton:!0,children:t.jsx(b.Title,{children:a&&a.id?"Edit User Agent":"Add User Agent"})}),t.jsxs(g,{onSubmit:k,children:[t.jsxs(b.Body,{children:[h&&t.jsx(V,{variant:"danger",children:h}),t.jsxs(g.Group,{className:"mb-3",children:[t.jsx(g.Label,{children:"User Agent"}),t.jsx(g.Control,{name:"key",value:i.key,onChange:d,required:!0,autoFocus:!0})]}),t.jsxs(g.Group,{className:"mb-3",children:[t.jsx(g.Label,{children:"Description"}),t.jsx(g.Control,{name:"description",value:i.description,onChange:d})]}),t.jsx(g.Group,{className:"mb-3",children:t.jsx(g.Check,{type:"checkbox",label:"Is Partial",name:"isPartial",checked:i.isPartial,onChange:d})})]}),t.jsxs(b.Footer,{children:[t.jsx(S,{variant:"primary",type:"submit",children:"Save"}),t.jsx(S,{variant:"secondary",onClick:n,children:"Cancel"})]})]})]})}function xe(e){const[n,s]=o.useState([]),[a,i]=o.useState(!1),[c,h]=o.useState(null),[v,d]=o.useState(!1),[k,m]=o.useState(""),[C,f]=o.useState(null),[j,p]=o.useState(!1),{authenticatedFetch:N}=Q(),A="https://dailyapisimple-gjchg7exhrcxf5cc.centralus-01.azurewebsites.net/v1/api/UserAgent",D=()=>{d(!0),m(""),N(A+"?skip=0&top=0&descending=false",{method:"GET",headers:{"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);return l.json()}).then(l=>s(l)).catch(l=>m("Error fetching data: "+l.message)).finally(()=>d(!1))};o.useEffect(()=>{D()},[]);const L=l=>{h(l),i(!0)},M=()=>{h(null),i(!0)},$=l=>{f(l),p(!0)},H=()=>{p(!1),C&&(d(!0),N(A+`/${C}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(l=>{if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);s(w=>w.filter(x=>x.id!==C))}).catch(l=>m("Error deleting: "+l.message)).finally(()=>{d(!1),f(null)}))},_=l=>{d(!0),m("");let w,x;l.id?(w="PUT",x=`${A}/${l.id}`):(w="POST",x=A),N(x,{method:w,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(y=>{if(!y.ok)throw new Error(`HTTP error! Status: ${y.status}`);return y.text()}).then(y=>{const P=JSON.parse(y);s(z=>z.some(u=>u.id===P.id)?z.map(u=>u.id===P.id?P:u):[P,...z]),i(!1)}).catch(y=>m("Error saving: "+y.message)).finally(()=>d(!1))},T=[{field:"id",headerName:"ID",sortable:!0},{field:"key",headerName:"User Agent",sortable:!0},{field:"description",headerName:"Description",sortable:!0},{field:"isPartial",headerName:"Is Partial",sortable:!0}];return t.jsxs("div",{className:"container-fluid p-0 mt-3",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[t.jsx("h4",{className:"mb-0",children:"User Agents"}),t.jsx(S,{variant:"success",size:"sm",onClick:M,children:"Add User Agent"})]}),k&&t.jsx(V,{variant:"danger",children:k}),t.jsx(de,{columns:T,data:n,onEdit:L,onDelete:$}),t.jsx(ue,{show:a,onHide:()=>i(!1),onSave:_,initial:c}),t.jsxs(b,{show:j,onHide:()=>p(!1),centered:!0,children:[t.jsx(b.Header,{closeButton:!0,children:t.jsx(b.Title,{children:"Confirm Delete"})}),t.jsx(b.Body,{children:"Are you sure you want to delete this user agent?"}),t.jsxs(b.Footer,{children:[t.jsx(S,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),t.jsx(S,{variant:"danger",onClick:H,children:"Delete"})]})]}),v&&t.jsx("div",{className:"text-center mt-2",children:t.jsx("span",{className:"spinner-border spinner-border-sm text-primary"})})]})}export{xe as default};
//# sourceMappingURL=UserAgents-BgWH8Wrt.js.map
