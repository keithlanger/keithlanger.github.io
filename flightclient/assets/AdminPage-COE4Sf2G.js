import{j as s,A as i,C as g,R as j,a as b,b as l,F as t,B as o,S as p}from"./bootstrap-loZ_3mSD.js";import{r as f}from"./vendor-CAgi6j6b.js";import{u as N,a as y}from"./index-CwgVr1bl.js";import"./router-BUXXEe8L.js";function S(){const{user:a}=N(),d=y();if(!d)return s.jsx(i,{variant:"danger",className:"mt-4",children:"Admin context not available."});const{buildState:e,buildFlightsForDate:c,clearBuildState:m,abortBuild:u}=d,[r,h]=f.useState(e.date||"");if(!(Array.isArray(a==null?void 0:a.roles)?a.roles:typeof(a==null?void 0:a.roles)=="string"?[a.roles]:[]).includes("admin"))return s.jsx(i,{variant:"danger",className:"mt-4",children:"You do not have permission to access this page."});const x=n=>{n.preventDefault(),c(r)};return s.jsx(g,{className:"py-4",children:s.jsx(j,{className:"justify-content-center",children:s.jsx(b,{md:8,lg:6,children:s.jsxs(l,{className:"shadow-sm border-0 admin-tools-rounded",children:[s.jsx(l.Header,{className:"bg-primary text-white rounded-top-4",children:s.jsx("h4",{className:"mb-0",children:"Administrator Tools"})}),s.jsxs(l.Body,{children:[s.jsxs(t,{onSubmit:x,className:"mb-3",children:[s.jsxs(t.Group,{controlId:"buildFlightsDate",children:[s.jsx(t.Label,{children:"Build Flights for Date"}),s.jsx(t.Control,{type:"date",value:r,onChange:n=>h(n.target.value),required:!0,disabled:e.loading})]}),s.jsx(o,{type:"submit",variant:"primary",className:"mt-3",disabled:e.loading||!r,children:e.loading?s.jsxs(s.Fragment,{children:[s.jsx(p,{animation:"border",size:"sm",className:"me-2"}),"Building Flights..."]}):"Build Flights"}),e.loading&&s.jsxs("div",{className:"d-flex align-items-center mt-3",children:[s.jsx(o,{variant:"outline-danger",className:"me-2",onClick:u,disabled:!e.loading,children:"Cancel"}),s.jsxs("span",{className:"text-muted",style:{fontSize:"0.85em"},children:[s.jsx("i",{className:"bi bi-info-circle me-1"}),"Cancel only stops this page from waiting. The backend job will continue running."]})]})]}),e.result&&s.jsxs(i,{variant:"success",children:["Flights built successfully.",s.jsx("br",{}),s.jsx("pre",{className:"mb-0",children:e.result}),s.jsx(o,{variant:"outline-secondary",size:"sm",className:"mt-2",onClick:m,children:"Dismiss"})]}),e.error&&s.jsx(i,{variant:"danger",children:e.error})]})]})})})})}export{S as default};
